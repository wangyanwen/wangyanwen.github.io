+++
date = '2025-11-17T22:32:19+01:00'
draft = false
title = '临时冒出的念头'
+++

下面给你总结几种 **在 Hugo + GitHub Pages（静态网站）+ 自有域名 + Cloudinary** 的技术栈下，**最实用、最容易实施** 的「部分网页不公开」方案，并告诉你各自适合的场景。

---

# ✅ **静态博客隐藏/限制访问的常见实现方式**

因为 GitHub Pages 本质是一个 **完全公开的静态网站**，不支持服务器端逻辑（无登录、无鉴权），所以你需要用 **前端层** 或 **部署策略层** 来实现限制访问。

下面从简单→可控→安全，给你列出可行的方法。

---

# 1️⃣ 最简单：**让 Hugo 不生成该页面（草稿 / 私密）**

如果只是你自己不想让页面上网：

### ✔ 方法

- `draft: true`
    
- 或 `private: true`（部分主题支持）
    
- 或者根本不 push 到 GitHub
    

### 示例 front matter

```yaml
---
title: "我的私密页面"
draft: true
---
```

### ✔ 效果

- Hugo 不会生成 HTML
    
- GitHub Pages 也不会部署
    
- 最干净，但 **无法让你访问线上版本**
    

---

# 2️⃣ 前端伪加密：**Staticrypt（简单密码加密 HTML）**

让某些页面需输入密码才能打开，是静态网站最常见方式。

### ✔ 工作方式

你本地生成 HTML  
→ 通过 Staticrypt 加密成“加密 HTML”  
→ GitHub Pages 仍然是静态文件  
→ 用户打开时输入你设定的密码解密显示真实页面。

### ✔ 一行命令

```bash
npx staticrypt yourpage.html --password="你的密码"
```

也可以加到 Hugo 构建脚本里。

### ✔ 优点

- 纯静态，无需服务器
    
- GitHub Pages 完全支持
    
- 配置简单
    

### ❗缺点

- 并非真正安全 → 适合“普通访问限制”，但不适合敏感内容。
    

---

# 3️⃣ 目录级保护（Cloudflare Access）🔥 **（强烈推荐）**

如果你的网站用了自有域名，可以直接让 Cloudflare 完成访问控制，不改你的 Hugo 结构。

### ✔ 原理

- Cloudflare 作为反向代理
    
- 某些 URL 规则需要 **登录**（Google / GitHub / Email OTP）
    
- 保护强度接近企业级访问控制
    

### ✔ 示例规则（Cloudflare Zero Trust）

你可以让：

```
https://example.com/private/*
```

需要 Google 登录才能访问。

### ✔ 优点

- 真正安全
    
- 不需要改 Hugo
    
- 体验好
    
- 免费计划即可使用基本功能
    

### ❗缺点

- 配置比 Staticrypt 稍复杂
    

---

# 4️⃣ GitHub Pages + 多仓库管理（不推荐但可行）

将不公开内容单独建一个仓库，用：

- GitHub private repo + GitHub Pages（私有仓库 pages 也公开）
    
- 或者把页面部署到不对外链接的子域名  
    示例：`secret.example.com`
    

但静态文件一旦部署仍然公开，因此并不是真保护。

除非配合 Cloudflare Access。

---

# 5️⃣ 浏览器端“伪登录”脚本（最弱，不推荐）

例如在页面顶部加：

```js
let p = prompt("请输入访问密码");
if(p !== "12345") {
  document.body.innerHTML = "无权限访问";
}
```

### ✔ 优点

- 最简单
    

### ❌缺点

- 完全不安全（源码一眼看到密码），仅适合临时隐藏
    

---

# 适合你当前架构的最佳方案

|方法|适合场景|安全性|复杂度|
|---|---|---|---|
|**Hugo draft**|不想公开，也不需要线上访问|★★★★★|★☆☆☆☆|
|**Staticrypt 加密页面**|需要分享给部分人，输入密码访问|★★★☆☆|★★☆☆☆|
|**Cloudflare Access**|需要真正限制权限，有登录验证|★★★★★|★★★☆☆|
|伪密码 JS|临时隐藏，不需要安全性|★☆☆☆☆|★☆☆☆☆|

---

# ⛳ 最推荐你采用的是：

## **👉 Cloudflare Access（安全 + 不改 Hugo）**

> 用 Google/Email 登录验证访问你想隐藏的页面。

或

## **👉 Staticrypt（轻量、不需要依赖 Cloudflare）**

---

如果你告诉我你的用途：

- ✔ “只是自己想看？”
    
- ✔ “要限制朋友访问？”
    
- ✔ “要严格保护隐私？”
    
- ✔ “想让某个目录设密码？”
    

我可以帮你选方案并写出一步一步配置说明（含命令、Cloudflare 规则模板、Hugo 自动构建脚本等）。

如果你的需求是：

> **“只有我给到权限，他人才可以看到某些网页。”**

那么在 **Hugo + GitHub Pages（静态）+ 自有域名** 的技术架构里，最合适、真正安全、且不破坏现有部署流程的方案只有一个：

# 🌟 **Cloudflare Access（Zero Trust Access Control）**

### 👉 这是满足你需求的**唯一真正安全且适合静态网站**的方案。

---

# ✅ 为什么只有 Cloudflare Access 最适合你？

因为 GitHub Pages 是静态托管，没有后台，所以不能：

- ❌ 创建账户
    
- ❌ 做登录系统
    
- ❌ 做数据库、权限验证
    

但 Cloudflare 作为你域名的代理，**可以为指定 URL 强制访问前需要验证身份**：

- Email 一次性验证码（OTP）
    
- 登陆 Google / GitHub / Microsoft
    
- 指定邮箱白名单
    
- 邀请访问
    

所以：

> **你给谁设权限，他才能看到；你不给，他完全打不开页面。**

并且：

- 不需要改 Hugo
    
- 不需要改 GitHub Pages
    
- 不需要额外服务器
    
- 不影响公开页面
    
- 免费计划即可用
    

---

# 🟩 如何实现：步骤最简单版（你 5 分钟就能完成）

## 🔧 前提

你的域名已接入 Cloudflare（大多数人都有）。

---

## ① 创建 Cloudflare Access 保护策略

进入：

**Cloudflare Dashboard → Zero Trust → Access → Applications → Add Application**

选择：

### 👉 **Self-hosted application**

然后填写：

- **Application Name:** private-pages
    
- **Domain:** `example.com/private/*`  
    （你要保护的路径）
    

---

## ② 设置访问规则（最关键）

在 “Policies” 里添加规则：

### ▶ Allow

```
Emails → is in list → [你允许访问的邮箱列表]
```

你可以添加：

- 朋友或家人的邮箱
    
- 自己的邮箱
    
- 任意用户邮箱
    

### ▶ Block（自动默认）

---

## ③ 完成

访问受保护页面时：

- 会跳到 Cloudflare Access 的验证页面
    
- 被允许的人会收到 **email OTP** 或使用 Google 登录
    
- 没权限的人完全打不开页面
    

---

# 🟦 示例：保护你的 Hugo 内某个目录

如果你的 Hugo 有：

```
content/private/*
```

生成后访问为：

```
https://yourdomain.com/private/page1/
https://yourdomain.com/private/page2/
```

你只需要在 Cloudflare Access 中配置：

```
https://yourdomain.com/private/*
```

就搞定了。

---

# 🟨 可选进阶：多页面/目录分别授权

你可以给：

```
/friends/*
/family/*
/team/*
```

分别配置不同邮箱白名单。

例如：

- 朋友 → 访问 friends 区域
    
- 家人 → 访问 private 区域
    
- 工作伙伴 → 访问 team 区域
    

完全独立互不干扰。

---

# 🟥 为什么不用 Staticrypt？

因为你说的是：

> **“只有我给到权限，他人才可以看到。”**

Staticrypt 只提供：

- 密码 → 谁知道密码谁都能打开
    
- 无法区分不同用户
    
- 密码泄露无法控制
    

**不能满足你“人员级别权限控制”的需求。**

---

# 🟩 总结：你的最优解决方案

|需求|最佳方案|
|---|---|
|指定某个人可访问|Cloudflare Access|
|控制每个页面的访问权限|Cloudflare Access|
|不改 Hugo、不改 GitHub Pages|Cloudflare Access|
|免费、简单、安全|Cloudflare Access|

---

